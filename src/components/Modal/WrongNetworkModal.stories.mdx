import { useState, useMemo, useEffect } from 'react'
import { ChainId } from '@dcl/schemas'
import { ProviderType } from 'decentraland-connect/dist/types'
import { Source, ArgsTable } from '@storybook/components'
import { Meta, Story, Preview, Canvas, Subtitle } from '@storybook/addon-docs'
import Base from './WrongNetworkModal.tsx'
import './Modal.stories.css'

<Meta title="Components/Modal/WrongNetworkModal" />

export let ID = 0
export function getID() {
  return ID++
}

export function WrongNetworkModal(props) {
  const [id] = useState(() => 'ID' + getID())
  const [mountNode, setMountNode] = useState()
  useEffect(() => {
    setMountNode(document.getElementById(id))
  }, [id])
  return (
    <div>
      <div id={id} />
      {mountNode && <Base {...props} mountNode={mountNode} />}
    </div>
  )
}

<Canvas isExpanded>
  <Story name="Wrong Network">
    <div>
      <WrongNetworkModal
        open
        currentNetwork={ChainId.MATIC_MUMBAI}
        expectedNetwork={ChainId.ETHEREUM_MAINNET}
      />
    </div>
  </Story>
</Canvas>

<Canvas isExpanded>
  <Story name="Multi Network Support">
    <div>
      <WrongNetworkModal
        open
        currentNetwork={ChainId.MATIC_MUMBAI}
        expectedNetwork={[ChainId.ETHEREUM_MAINNET, ChainId.MATIC_MAINNET]}
      />
    </div>
  </Story>
</Canvas>

<Canvas isExpanded>
  <Story name="Switch Network">
    <div>
      <WrongNetworkModal
        open
        providerType={ProviderType.INJECTED}
        currentNetwork={ChainId.MATIC_MUMBAI}
        expectedNetwork={ChainId.ETHEREUM_MAINNET}
      />
    </div>
  </Story>
</Canvas>

<Canvas isExpanded>
  <Story name="Switch Multi Network">
    <div>
      <WrongNetworkModal
        open
        providerType={ProviderType.INJECTED}
        currentNetwork={ChainId.MATIC_MUMBAI}
        expectedNetwork={[ChainId.ETHEREUM_MAINNET, ChainId.MATIC_MAINNET]}
      />
    </div>
  </Story>
</Canvas>

<Divider size="small" />
